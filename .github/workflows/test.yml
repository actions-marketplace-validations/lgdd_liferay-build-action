name: continuous-test
run-name: Continuous Test

on:
  push:

jobs:
  test-gradle-build-only--main:
    runs-on: ubuntu-latest
    steps:
      - name: Set up Blade
        run: |
          curl -fsSL https://raw.githubusercontent.com/liferay/liferay-blade-cli/master/cli/installers/local | bash
          echo "/home/runner/jpm/bin" >> $GITHUB_PATH
      - name: Create Liferay Workspace
        run: |
          blade init -v 7.4 liferay-gradle-workspace
      - uses: lgdd/liferay-build-action@main
        with:
          profile: 'prod'
          upload-artifacts: false
          workspace-directory: ./liferay-gradle-workspace
  test-gradle-build-upload--main:
    runs-on: ubuntu-latest
    steps:
      - name: Set up Blade
        run: |
          curl -fsSL https://raw.githubusercontent.com/liferay/liferay-blade-cli/master/cli/installers/local | bash
          echo "/home/runner/jpm/bin" >> $GITHUB_PATH
      - name: Create Liferay Workspace
        run: |
          blade init -v 7.4 liferay-gradle-workspace
      - uses: lgdd/liferay-build-action@main
        with:
          profile: 'prod'
          upload-artifacts: true
          workspace-directory: ./liferay-gradle-workspace
  test-maven-build-only--main:
    runs-on: ubuntu-latest
    steps:
      - name: Set up Blade
        run: |
          curl -fsSL https://raw.githubusercontent.com/liferay/liferay-blade-cli/master/cli/installers/local | bash
          echo "/home/runner/jpm/bin" >> $GITHUB_PATH
      - name: Create Liferay Workspace
        run: |
          blade init -v 7.4 -b maven liferay-maven-workspace
      - uses: lgdd/liferay-build-action@main
        with:
          profile: 'prod'
          upload-artifacts: false
          workspace-directory: ./liferay-maven-workspace
  test-maven-build-upload--main:
    runs-on: ubuntu-latest
    steps:
      - name: Set up Blade
        run: |
          curl -fsSL https://raw.githubusercontent.com/liferay/liferay-blade-cli/master/cli/installers/local | bash
          echo "/home/runner/jpm/bin" >> $GITHUB_PATH
      - name: Create Liferay Workspace
        run: |
          blade init -v 7.4 -b maven liferay-maven-workspace
      - uses: lgdd/liferay-build-action@main
        with:
          profile: 'prod'
          upload-artifacts: true
          workspace-directory: ./liferay-maven-workspace
